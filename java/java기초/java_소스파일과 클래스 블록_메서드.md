# 자바 소스파일과 클래스 블록

## class

아래 소스코드 예제를 보자

```java
test1.java
class A {

}
```

- 자바 컴파일러는 클래스 블록단위로 컴파일을 수행한다.
- 클래스 블록 단위로 클래스 파일(.class 파일)을 생성한다.
- 클래스 파일의 이름은 클래스 블록의 이름과 같다.

```java
test2.java
class b {

}
class c {

}
```

- 한 소스 파일에 여러 개의 클래스 블록이 있을 경우 각 블록 당 한 개의 클래스 파일(.class)이 생성된다.

---

## public class

- 클래스 공개 범위
- 공개 클래스의 경우 소스 파일명이 클래스 이름과 같아야 한다. 다르면 컴파일 오류가 발생한다.
- 비공개 클래스의 경우 클래스명과 소스 파일명이 일치하지 않아도 된다.

```java
test3.java
class D { 
  public class E {

  }
}
```

- 위 코드처럼 클래스명이 다르면 오류가 난다.

```java
test4.java
public class test4 { 
  class G {
  }
  class H {
  }
}
```

- 위코드를 실행하면 각 클래스블록 이 생성된다.

---

## 클래스 접근 제어

- 클래스를 선언할 때 사용 범위를 조정할 수 있다.
  - public : 다른 패키지의 클래스가 사용할 수 있게 공개한다.
  - (default) : 같은 패키지에 소속된 클래스만이 사용할 수 있다.
- 문법
  - 공개: public class 클래스명 {...}
  - 비공개: class 클래스명 {...}

---

## 클래스와 소스 파일

- 클래스의 공개 여부와 상관없이 보통 한 소스 파일에 한 클래스를 작성한다.
- 클래스명과 소스 파일명을 같게 하여 유지보수할 때 클래스를 찾기 쉽게 한다.
- 클래스를 공개하는 경우 소스 파일 이름은 반드시 클래스 이름과 같아야 한다.
- 소스 코드의 관리를 쉽게 하기 위해 보통 한 파일에 한 클래스를 둔다.
- 또한 클래스 이름과 파일명을 같게 하여 찾기 쉽게 한다.

---

## 소스파일 인코딩 지정하기

- 컴파일 할 때 소스 파일의 문자집합을 지정하는 방법
  - 컴파일할 때 소스 파일의 인코딩 문자집합을 지정하지 않으면, 운영체제의 기본 문자 집합으로 저장되어 있다고 간주하고 컴파일한다.
  - 만약 소스 파일의 인코딩 문자집합이 운영체제의 기본 문자표(character set)와 다르다면, 컴파일 오류가 발생한다.
  - 해결책? 다음과 같이 컴파일할 때 옵션을 지정한다.
  - 컴파일 옵션
    - `javac -encoding [문자집합] [소스파일명]`
    - 예) `$ javac -d bin/main -encoding UTF-8 [소스파일명]`

---

## main() 메서드

- 다음과 같이 JVM을 통해 클래스를 실행하면, JVM은 그 클래스에서 main() 메서드를 찾아 실행한다.

```java
public class example {
   public static void main(String[] args) {
   }
}
```

- main() 메서드가 없으면 실행 오류가 발생한다.
- 프로그램을 실행하는 시작점이라는 의미에서  "entry point" 라 부른다.

---

## JVM이 클래스를 실행하는 과정

1) 실행할 클래스 파일을 CLASSPATH에 등록된 디렉토리 경로에서 찾는다.
2) 클래스 파일이 유효한 바이트코드(bytecode) 인지 검사한다.
3) 메모리에 바이트코드를 적재(load)한다.
4) public static void main(String[] args) {} 블록을 찾는다.
5) main() 블록에 들어 있는 코드를 실행한다.